apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: cpet-paas-tekton
  namespace: cpet-argocd
  annotations:
    argocd.argoproj.io/sync-options: ApplyOutOfSyncOnly=true
spec:
  generators: []
  template:
    metadata:
      name: '{{paas}}-cpet-capability-tekton'
    spec:
      destination:
        namespace: '{{paas}}-tekton'
        server: 'https://kubernetes.default.svc'
      project: '{{paas}}'
      source:
        kustomize:
          commonLabels:
            capability: tekton
            clusterquotagroup: '{{requestor}}'
            paas: '{{paas}}'
            service: '{{service}}'
            subservice: '{{subservice}}'
        path: paas-capabilities/tekton
        repoURL: 'https://gitlab.com/BenoitSchipper/crc-benoit-sebas.git'
        targetRevision: main
      syncPolicy:
        automated:
          selfHeal: true